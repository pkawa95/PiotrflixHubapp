<!doctype html>
<html lang="pl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Piotrflix – panel</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="/static/icon.png" type="image/png"/>
</head>
<body>

  <!-- EKRAN LOGOWANIA / REJESTRACJI -->
  <main id="auth" class="auth">
    <div class="auth-card">
      <img class="auth-logo" src="/static/logo.png" alt="Piotrflix" />

      <div class="auth-tabs" role="tablist" aria-label="Authentication">
        <button id="tab-login"  class="tab active" role="tab" aria-selected="true">Zaloguj</button>
        <button id="tab-register" class="tab" role="tab" aria-selected="false">Zarejestruj</button>
      </div>

      <!-- LOGIN -->
      <form id="loginForm" class="form form-login" autocomplete="on" novalidate>
        <div class="field">
          <label for="loginEmail">Email</label>
          <input id="loginEmail" type="email" inputmode="email" placeholder="np. user@domena.pl" required />
          <p class="err" id="loginEmailErr"></p>
        </div>
        <div class="field">
          <label for="loginPass">Hasło</label>
          <input id="loginPass" type="password" placeholder="••••••••" required minlength="6"/>
          <p class="err" id="loginPassErr"></p>
        </div>
        <button class="btn primary" id="loginBtn" type="submit">Zaloguj</button>
        <p class="hint" id="loginMsg"></p>
      </form>

      <!-- REGISTER -->
      <form id="registerForm" class="form form-register hidden" autocomplete="off" novalidate>
        <div class="row-2">
          <div class="field">
            <label for="regFirst">Imię</label>
            <input id="regFirst" placeholder="Jan" required />
            <p class="err" id="regFirstErr"></p>
          </div>
          <div class="field">
            <label for="regLast">Nazwisko</label>
            <input id="regLast" placeholder="Kowalski" required />
            <p class="err" id="regLastErr"></p>
          </div>
        </div>
        <div class="field">
          <label for="regEmail">Email</label>
          <input id="regEmail" type="email" inputmode="email" placeholder="np. user@domena.pl" required />
          <p class="err" id="regEmailErr"></p>
        </div>
        <div class="row-2">
          <div class="field">
            <label for="regPass">Hasło</label>
            <input id="regPass" type="password" placeholder="min. 6 znaków" required minlength="6" />
            <p class="err" id="regPassErr"></p>
          </div>
          <div class="field">
            <label for="regPass2">Powtórz hasło</label>
            <input id="regPass2" type="password" placeholder="powtórz hasło" required minlength="6" />
            <p class="err" id="regPass2Err"></p>
          </div>
        </div>
        <button class="btn success" id="regBtn" type="submit">Utwórz konto</button>
        <p class="hint" id="regMsg"></p>
      </form>

      <p class="swipe-hint">Możesz też <strong>przesunąć</strong> w lewo/prawo, aby przełączyć Zaloguj ↔ Zarejestruj.</p>

      <footer class="auth-footer">
        <img src="/static/icon.png" alt="" class="copyright-icon"/>
        <span>© PiotrFlix 2025</span>
      </footer>
    </div>
  </main>

  <!-- GŁÓWNY INTERFEJS (ukryty gdy niezalogowany) -->
  <div id="app" class="app hidden">

    <header class="topbar">
      <div class="left">
        <img src="/static/logo.png" alt="Piotrflix" class="logo-small">
        <span class="brand">Piotrflix</span>
      </div>
      <div class="right">
        <span id="who" class="who muted">—</span>
        <button id="themeToggle" class="btn ghost" title="Jasny/Ciemny tryb">🌓</button>
        <button id="logoutBtn" class="btn ghost">Wyloguj</button>
      </div>
    </header>

    <!-- Ekrany -->
    <section id="view-torrents" class="view active" data-tab="torrents">
      <div class="panel">
        <div class="panel-head">
          <h2>Torrenty</h2>
          <div class="spacer"></div>
          <button id="tAuto" class="btn">Auto: OFF</button>
          <button id="tRefresh" class="btn primary">Odśwież</button>
        </div>

        <div class="row wrap">
          <div class="field">
            <label>Urządzenie</label>
            <select id="deviceSel"></select>
          </div>
          <div class="field">
            <label>Global limit (MiB/s, ≤0=OFF)</label>
            <input id="globRate" type="number" step="0.1" placeholder="np. 10" />
          </div>
          <button id="setGlobRate" class="btn">Ustaw limit</button>
          <span id="devInfo" class="hint"></span>
        </div>

        <div class="muted" id="tInfo">—</div>
        <div class="table-scroll">
          <table class="table">
            <thead>
              <tr>
                <th>Info hash</th>
                <th>Nazwa</th>
                <th>Postęp</th>
                <th>Prędkości</th>
                <th>Peers</th>
                <th>Rozmiar</th>
                <th>Ratio</th>
                <th>Stan</th>
                <th>Akcje</th>
              </tr>
            </thead>
            <tbody id="tBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section id="view-search" class="view" data-tab="search">
      <div class="panel">
        <div class="panel-head">
          <h2>Wyszukaj</h2>
        </div>

        <div class="row wrap">
          <div class="field grow">
            <label>Fraza</label>
            <input id="query" placeholder="np. scary movie"/>
          </div>
          <div class="field">
            <label>Provider</label>
            <select id="provider">
              <option value="yts_api">YTS (API)</option>
              <option value="yts_html">YTS (HTML)</option>
              <option value="tpb_premium">TPB – premium (207)</option>
              <option value="tpb_series">TPB – seriale (208)</option>
              <option value="tpb">TPB – ogólne</option>
            </select>
          </div>
          <div class="field">
            <label>Rodzaj</label>
            <select id="mtype">
              <option value="movie">movie</option>
              <option value="series">series</option>
            </select>
          </div>
          <div class="field">
            <label>Jakość</label>
            <select id="quality">
              <option value="">auto jakość</option>
              <option value="2160p">2160p</option>
              <option value="1080p" selected>1080p</option>
              <option value="720p">720p</option>
            </select>
          </div>
          <div class="field">
            <label>TMDb API (opcjonalnie)</label>
            <input id="tmdb" placeholder="klucz TMDb" />
          </div>
          <button id="searchBtn" class="btn success">Szukaj</button>
        </div>
        <p id="countInfo" class="hint">—</p>

        <div id="results" class="cards"></div>
      </div>
    </section>

    <section id="view-available" class="view" data-tab="available">
      <div class="panel">
        <div class="panel-head">
          <h2>Dostępne</h2>
        </div>

        <div class="row wrap">
          <div class="field grow">
            <label>Szukaj</label>
            <input id="avQuery" placeholder="np. Matrix"/>
          </div>
          <div class="field">
            <label>Rodzaj</label>
            <select id="avKind">
              <option value="all" selected>all</option>
              <option value="movie">movie</option>
              <option value="series">series</option>
            </select>
          </div>
          <div class="field">
            <label>Sortowanie</label>
            <select id="avSort">
              <option value="recent" selected>ostatnio aktualizowane</option>
              <option value="title">tytuł A→Z</option>
              <option value="progress">postęp malejąco</option>
            </select>
          </div>
          <button id="avRefresh" class="btn primary">Odśwież</button>
          <button id="avAuto" class="btn">Auto: OFF</button>
          <span id="avInfo" class="hint"></span>
        </div>

        <div id="availableGrid" class="grid"></div>
      </div>
    </section>

    <section id="view-options" class="view" data-tab="options">
      <div class="panel">
        <div class="panel-head">
          <h2>Opcje</h2>
        </div>

        <div class="row wrap">
          <div class="field grow">
            <label>Backend API</label>
            <input id="baseUrlInput" placeholder="https://api.pkportfolio.pl"/>
          </div>
          <button id="saveBaseUrl" class="btn">Zapisz</button>
        </div>

        <div class="row wrap">
          <div class="field">
            <label>Tryb motywu</label>
            <div class="seg">
              <button class="seg-btn" data-theme="light">Jasny</button>
              <button class="seg-btn active" data-theme="dark">Ciemny</button>
              <button class="seg-btn" data-theme="auto">Auto</button>
            </div>
          </div>
        </div>

        <div class="panel foot-note">
          <p class="hint">Backend: <code id="baseUrlLabel"></code> (włącz CORS)</p>
        </div>
      </div>
    </section>

    <!-- DOLNE MENU -->
    <nav class="bottom-nav" aria-label="Główne menu">
      <button class="nav-btn active" data-target="torrents" title="Torrenty">
        <img src="/static/svg/secure-download-svgrepo-com.svg" alt="" />
        <span>Torrenty</span>
      </button>
      <button class="nav-btn" data-target="search" title="Wyszukaj">
        <img src="/static/svg/search-alt-2-svgrepo-com.svg" alt="" />
        <span>Wyszukaj</span>
      </button>
      <button class="nav-btn" data-target="available" title="Dostępne">
        <img src="/static/svg/film-gallery-svgrepo-com.svg" alt="" />
        <span>Dostępne</span>
      </button>
      <button class="nav-btn" data-target="options" title="Opcje">
        <img src="/static/svg/settings-svgrepo-com.svg" alt="" />
        <span>Opcje</span>
      </button>
    </nav>

  </div>

  <script src="app.js"></script>
</body>
</html>
